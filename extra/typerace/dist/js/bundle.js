!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([,function(e,t){const n=document.getElementById("textBlock"),s=document.getElementById("inputBlock"),i=document.getElementById("minutes"),o=document.getElementById("seconds"),r=document.getElementById("speed");class u{constructor(){this.state={text:[],index:0,count:0},this.time={second:0,minutes:0,speed:0},this.sendRequest=(()=>new Promise((e,t)=>{const n=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);n.open("GET","https://fish-text.ru/get?&type=sentence&number=1",!0),n.onload=function(){const t=JSON.parse(this.responseText);"success"===t.status?e(t.text):console.log(`${t.errorCode}\n${t.text}`)},n.onerror=function(){alert(`Ошибка ${this.status}`)},n.send()}))}getText(){this.sendRequest().then(e=>{n.innerHTML=e,this.state.text=e.split(" "),this.state.index=0,this.state.count=0,this.time.second=0,this.time.minutes=0,this.time.speed=0})}checkWord(){const e=this.state.text[this.state.index].substring(0,s.value.length);let t=!1,n=s.value;" "===n.slice(-1)&&(n=s.value.slice(0,-1),t=!0),(n=t?s.value.slice(0,-1):s.value)===e?(s.classList.remove("error"),this.state.count+=1):s.classList.add("error"),t&&n===e&&(this.state.index+=1,s.value=""),this.state.index===this.state.text.length&&(alert("Поздравляю, вы прошли игру"),this.getText())}timer(){setInterval(()=>{this.time.second+=1,this.time.speed+=1,o.innerHTML=this.time.second,59===this.time.second&&(this.time.minutes+=1,i.innerHTML=this.time.minutes,this.time.second=0)},1e3)}}document.addEventListener("DOMContentLoaded",()=>{const e=new u;e.getText(),s.addEventListener("keyup",t=>{e.checkWord()}),setInterval(()=>{r.innerHTML=e.state.count/(e.time.speed/60)},3e3),e.timer()})}]);